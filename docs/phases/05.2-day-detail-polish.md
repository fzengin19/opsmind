# Phase 5.1: Day Detail Polish Plan

## Problem
1. **Filter Inconsistency:** The Day Detail Modal shows all events, ignoring the sidebar filters set in the main calendar view.
2. **Visual Inconsistency:** The Day Detail Modal uses a different styling approach (left border only) compared to the Month View (full background opacity + border + text), and doesn't fully support the dynamic Hex colors in the same way.

## Proposed Changes

### 1. Make Day Detail Reactive to Filters
- **File:** `resources/views/livewire/calendar/day-detail.blade.php`
- **Change:**
    - Add a `#[Reactive]` public property `$calendarIds`.
    - Update `agenda` computed property to pass `$this->calendarIds` to `CalendarService::getDayAgenda`.
- **File:** `resources/views/livewire/calendar/index.blade.php`
- **Change:**
    - Pass the `visibleCalendarIds` to the component: `<livewire:calendar.day-detail :calendar-ids="$visibleCalendarIds" />`

### 2. Unify Color Logic
- **File:** `resources/views/livewire/calendar/day-detail.blade.php`
- **Change:**
    - Inside the `@foreach($this->agenda as $item)` loop, implement the same color logic used in `index.blade.php`:
        - Check if `$event->calendar?->color` is a Hex code.
        - Be aware: In `index`, events are arrays. In `day-detail`, events are `Appointment` models. `calendar` is a relation.
        - Logic:
            ```php
            $color = $event->calendar?->color ?? $event->type->color(); // Enum or String
            $isHex = str_starts_with($color, '#');
            // ... apply same semantic match or dynamic style ...
            ```
    - Apply the style to the card container:
        - If Hex: `background-color: hex+opacity; border-color: hex; color: hex;`
        - If Semantic: Use Tailwind classes.

## Verification
1. **Filter Test:**
    - Open Calendar.
    - Uncheck "Personal" calendar.
    - Click on a day with Personal events.
    - Verify Personal events are NOT shown in the modal.
    - Check "Personal" calendar back.
    - Verify they appear.
2. **Color Test:**
    - Create a calendar with a custom Hex color (e.g., `#E91E63`).
    - Create an event in it.
    - Open Day Detail.
    - Verify the card has a pinkish background (opacity), pink border, and pink text.
