# Phase 5.3: All-Day Event Implementation Plan

## Problem
The "All Day" checkbox in the appointment form exists but is functionally incomplete:
1.  **Form UX:** Checking it does not hide/disable time inputs, confusing the user.
2.  **Visuals:** All-day events appear as regular events with "00:00 - 00:00" times (or similar) in the Day Detail view.
3.  **Month View:** There is no visual distinction (e.g., solid background) for all-day events.

## Proposed Changes

### 1. Appointment Form (`appointment-form.blade.php`)
-   **Logic:**
    -   When `all_day` is toggled `on`:
        -   Switch inputs from `datetime-local` to `date`.
        -   Force time components to 00:00:00 and 23:59:59 internally on save.
    -   When `all_day` is toggled `off`:
        -   Switch inputs back to `datetime-local`.
-   **UI:**
    -   Use `@if($all_day)` to conditionally render `flux:input type="date"` vs `type="datetime-local"`.

### 2. Calendar Service (`CalendarService.php`)
-   **Method:** `getAppointmentsForMonth`, `getAppointmentsForWeek`, `getDayAgenda`
-   **Change:** Ensure the `all_day` boolean flag is passed in the returned data arrays/collections.
    -   Current `getDayAgenda` returns `Appointment` models, so it's already there.
    -   Current `getAppointmentsForMonth` maps to an array. Need to add `'isAllDay' => $apt->all_day`.

### 3. Month View (`index.blade.php`)
-   **Loop:** Inside the event loop.
-   **Change:**
    -   Check `$event['isAllDay']`.
    -   **Styling:**
        -   **Regular:** Transparent background, colored text, left border (Current design).
        -   **All Day:** Solid colored background, white text (or high contrast), rounded.
        -   *Note:* Ensure text contrast is accessible.

### 4. Day Detail Modal (`day-detail.blade.php`)
-   **Loop:** Inside `@foreach($this->agenda as $item)`.
-   **Change:**
    -   If `$event->all_day` is true:
        -   Hide "00:00 - 23:59" time range.
        -   Display "All Day" (or "Tüm Gün") badge/text.
        -   Sort order: Ensure all-day events stay at the top (handled by `orderBy('start_at')` usually, since they start at 00:00).

## Verification Plan
1.  **Create All-Day Event:**
    -   Open Form.
    -   Check "All Day".
    -   Verify inputs change to Date only.
    -   Save.
2.  **Verify Month View:**
    -   Check that the new event appears with a solid background (or distinct style).
3.  **Verify Day Detail:**
    -   Click the day.
    -   Verify the event shows "All Day" instead of time range.
4.  **Edit Event:**
    -   Open event.
    -   Uncheck "All Day".
    -   Verify inputs revert to Datetime.
    -   Save and verify it looks like a normal event.
