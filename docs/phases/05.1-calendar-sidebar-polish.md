# Faz 5.1: Calendar Sidebar & UI Polish

**Özet:** Bu fazın amacı, takvim uygulamasının kullanıcı deneyimini tamamlayan "Yan Menü (Sidebar)" ve "Görsel Zenginleştirme (Hex Colors)" özelliklerini eklemektir. Backend altyapısı zaten hazırdır.

## 1. Calendar Sidebar (Yan Menü)

### Amaç
Kullanıcının sahip olduğu ve abone olduğu takvimleri listelemek, görünürlüklerini açıp kapatmasını sağlamak.

### Teknik Detaylar
- **Konum:** `resources/views/livewire/calendar/index.blade.php` dosyasında sol tarafta 64px genişliğinde (responsive: mobilde üstte veya gizli) bir alan.
- **Bileşenler:**
  - `My Calendars` Başlığı
  - `Other Calendars` Başlığı (Şirket takvimi vb. için - Opsiyonel)
  - Her takvim için bir satır:
    - **Checkbox:** Wire model ile `visibleCalendarIds` dizisine bağlı.
    - **Renk İkonu:** Takvimin rengini gösteren daire (`w-3 h-3 rounded-full`).
    - **İsim:** Takvim adı (`truncate`).
    - **Actions (Hover):** (İleride) Düzenle/Sil butonları için yer tutucu.

### Veri Akışı
1. `mount()` metodunda `visibleCalendarIds` tüm erişilebilir takvim ID'leri ile doldurulur.
2. Checkbox tıklandığında `toggleCalendar($id)` metodu çalışır (Backend).
3. `visibleCalendarIds` değiştiğinde Livewire bileşeni `events` ve `monthEvents` verilerini tekrar hesaplar (zaten `render` veya `with` içinde bu mantık var).
4. Arayüz güncellenir ve sadece seçili takvimlerin randevuları görünür.

## 2. Hex Color Entegrasyonu (Görsel İyileştirme)

### Amaç
Kullanıcıların takvimleri için seçtikleri özel HEX renklerinin tüm görünümlerde (Ay, Hafta, Gün) doğru şekilde yansıtılması.

### Mevcut Durum
Hafta ve Gün görünümlerinde kısmi bir hex mantığı var. Ay görünümünde ise sadece `switch case` ile kısıtlı renk paleti (primary, success vb.) destekleniyor.

### Yapılacaklar
1. **Database:** `calendars` tablosunda `color` sütunu zaten var.
2. **Service (`CalendarService`):**
   - `getAppointmentsForMonth` metodunda `color` değeri statik class ismi yerine, takvimin gerçek `color` (hex) değeri olarak dönmeli.
   - Eğer renk yoksa default Type rengi (enum'dan) kullanılmalı.
3. **Frontend (`index.blade.php`):**
   - **Ay Görünümü:** Etkinlik "chip"lerinin arka plan (`bg-`) ve metin (`text-`) renkleri inline style ile dinamik hale getirilecek.
     - `style="background-color: {{ $hex }}20; color: {{ $hex }}; border-left-color: {{ $hex }};"`
   - **Hafta/Gün Görünümü:** Mevcut mantık iyileştirilerek tüm event tipleri için tutarlı hale getirilecek.
4. **Service Update (`CalendarService`):**
   - `getAppointmentsForWeek` ve `getAppointmentsForMonth` metodları, tek bir `int $calendarId` yerine `array $calendarIds` kabul edecek şekilde güncellenecek (`whereIn` kullanımı).
   - Bu, `index.blade.php` üzerinden `visibleCalendarIds`'in servise gönderilmesini sağlayacak.

## 3. Test & Doğrulama Planı

### Manuel Testler
1. [ ] Sidebar'da tüm takvimlerin listelendiğini gör.
2. [ ] Bir takvimin tikini kaldır -> Randevuları ekrandan kaybolmalı.
3. [ ] Tiki tekrar işaretle -> Randevular geri gelmeli.
4. [ ] Yeni randevu ekle -> İlgili takvimin renginde görünmeli.
5. [ ] Ay görünümüne geç -> Takvim renklerinin doğru tonlarda (farklı renklerde) olduğunu doğrula.

### Otomasyon (Mevcut testlere ek)
- Sidebar toggle işlemi `visibleCalendarIds` state'ini değiştiriyor mu? (Unit/Livewire test)
- Filtreleme sonrası dönen event sayısı azalıyor mu?

## 4. Görev Listesi

- [ ] **Sidebar UI:** `index.blade.php` içine sidebar HTML yapısını ekle.
- [ ] **Filter Logic:** Checkbox'ların `toggleCalendar` aksiyonunu tetiklediğini ve veriyi filtrelediğini doğrula.
- [ ] **Month View Colors:** Ay görünümündeki Tailwind renk sınıflarını dinamik `style` attribute'u ile değiştir.
- [ ] **Mobile Responsive:** Mobilde sidebar'ın Accordion veya Modal içinde düzgün görünmesini sağla.
